# 1장 도커란?
도커는 **리눅스 컨테니어**에 여러 기능을 추가함으로써 애플리케이션을 컨테이너로서 좀 더 쉽게 사용할 수 있게 만들어진 오픈소스 프로젝트이다.
 - Go언어로 작성됨
 - 2013년 3월 첫번째 릴리스 이후 꾸준히 개발되는 중
 - 가상머신과는 달리 **도커 컨테이너**는 성능의 손실이 거의 없어 **차세대 클라우드 인프라 솔루션**으로 주목받고있음

 #### 관련 프로젝트
 - 도커 컴포즈(Docker Compose)
 - 레지스트리(Private Registry)
 - 도커 허브(Docker Hub)
 - Docker for Desktop
 - 등등...

> 일반적으로 도커라고 하면 **도커 엔진(Docker Engine)** 을 의미
(도커의 주 프로젝트)

## 1.1 가상 머신과 도커 컨테이너
### 가상 머신
기존의 가상화 기술은 **하이퍼바이저**를 이용해 여러 개의 운영체제(OS)를 하나의 호스트에서 생성해 사용하는 방식이었다. 
- 여러 개의 운영체제는 가상 머신이라는 단위로 구별
- 각 가상 머신에는 우분투(Ubuntu), CentOS등의 운영체제가 설치되어 사용
- 하이퍼바이저에 의해 관리되는 운영체제는 게스트 운영체제(Guest OS)라 하며, 각 게스트 운영체제는 다른 게스트 운영체제와는 완전히 독립된 공간과 시스템 자원을 할당받아 사용
> 대표적인 툴: VirtualBox, VMware
- 성능 손실 발생: 각종 시스템 자원을 가상화하고 독립된 공간을 생성하는 작업은 하이퍼바이저를 반드시 거치기 때문에 성능 손실 발생.
- 이미지 용량 커짐: 게스트운영체제를 포함하기때문에 용량 부담 큼

### 도커 컨테이너
가상화된 공간을 생성하기 위해 리눅스의 자체 기능인 [chroot, namespace, cgroup](https://tomatohj.tistory.com/39)을 사용함으로써 프로세스 단위의 격리 환경을 만들기 때문에 **성능 손실이 거의 없다.**
- 호스트의 커널을 공유
- 컨테이너 안에는 애플리케이션 관련 파일만 존재
  - 이미지 용량이 줄어 배포 시간도 빠름

## 1.2 도커를 시작해야 하는 이유
컨테이너는 OpenVZ, LXC, cri-o 등 몇 가지가 존재하지만, 특히 도커는 컨테이너 생태계에서 사실상 표준으로서 사용되고 있다.
- 쿠버네티스, 메소스와 같은 오픈소스 프로젝트도 도커를 기준으로 개발되고 있음
- 여러 회사들이 서비스 개발 및 운영환경에 도커 컨테이너를 도입
### 어플리케이션의 개발과 배포가 편해집니다.
- 서버를 부팅할 때 실행되는 운영체제: **호스트OS**
  - 도커 컨테이너는 호스트OS 위에서 실행되는 격리된 공간
  - 컨테이너 내부에서 일어나는 일은 호스트OS에 영향을 끼치지 않는다.
> 독립된 개발 환경 보장

- 컨테이너 내부에서 여러 작업을 마친 뒤, 운영 환경에 배포할때
  - 도커 이미지라고 하는 일종의 패키지로 만들어 운영 서버에 전달만 하면 됨.
	  - 설치, 라이브러리, 의존성 걱정 X
  - 개발 당시 환경을 컨테이너로서 복제할 수 있기 떄문에 개발/운영 환경 통합 가능 
  - 도커 이미지는 가상 머신의 이미지와 달리 커널을 포함하고 있지 않음 **(앞에서 부터 계속 나오는 얘기)**
	  - 이미지 크기가 작아 배포 속도 매우 빠름(2.3챕터에 더 자세히 나온다고 함)

### 여러 애플리케이션의 독립성과 확장성이 높아집니다.
- 컨테이너는 수 초 내로 생성, 시작이 가능
  - 때문에 마이크로서비스 구조에서 가장 많이 사용되고 있음

> 웹 서비스를 데이터베이스 컨테이너와 웹 서버 컨테이너로 분리하고, 웹 서비스에 부하가 발생할 시 웹 서버 컨테이너만을 동적으로 늘려서 부하를 분산 할 수 있음

